sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i,a){"use strict";return e.extend("lrftracker.controller.BLrfTracker",{onInit:function(){var e=new sap.ui.model.json.JSONModel;e.loadData("model/UserData.json");this.getView().setModel(e,"EmailModel")},onPress:function(e){var t=e.getSource();var i=t.getBindingContext().getObject("LRF_Master_ID");var a=t.getBindingContext().getObject("Lrf_No");var s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("page2",{LRF_Master_ID:i,Lrf_No:a})},onSelectAssignMPL:function(e){if(!this._DialogEmployeesave4){this._DialogEmployeesave4=sap.ui.xmlfragment("lrftracker.view.MPL_Email",this);this.getView().addDependent(this._DialogEmployeesave4)}jQuery.sap.syncStyleClass("sapUiSizeCompact",this.getView(),this._DialogEmployeesave4);this._DialogEmployeesave4.open()},onSelectAssignFF:function(e){if(!this._DialogEmployeesave5){this._DialogEmployeesave5=sap.ui.xmlfragment("lrftracker.view.FF_Email",this);this.getView().addDependent(this._DialogEmployeesave5)}jQuery.sap.syncStyleClass("sapUiSizeCompact",this.getView(),this._DialogEmployeesave5);this._DialogEmployeesave5.open()},onSelectAssignCHA:function(e){if(!this._DialogEmployeesave6){this._DialogEmployeesave6=sap.ui.xmlfragment("lrftracker.view.CHA_Email",this);this.getView().addDependent(this._DialogEmployeesave6)}jQuery.sap.syncStyleClass("sapUiSizeCompact",this.getView(),this._DialogEmployeesave6);this._DialogEmployeesave6.open()},_handleValueHelpSearchMPL:function(e){var t=[];var i=e.getSource()._sSearchFieldValue;if(i&&i.length>0){var a=new sap.ui.model.Filter("Email",sap.ui.model.FilterOperator.Contains,i);t.push(a)}var s=e.getSource().getBinding("items");s.filter(t)},_handleValueHelpSearchFF:function(e){var t=[];var i=e.getSource()._sSearchFieldValue;if(i&&i.length>0){var a=new sap.ui.model.Filter("Email",sap.ui.model.FilterOperator.Contains,i);t.push(a)}var s=e.getSource().getBinding("items");s.filter(t)},_handleValueHelpSearchCHA:function(e){var t=[];var i=e.getSource()._sSearchFieldValue;if(i&&i.length>0){var a=new sap.ui.model.Filter("Email",sap.ui.model.FilterOperator.Contains,i);t.push(a)}var s=e.getSource().getBinding("items");s.filter(t)},_handleValueHelpConfirmMPL:function(e){var t=e.getParameter("selectedItem").getTitle();var i=this.getView().byId("mtable").getSelectedItem().getBindingContext().getObject().LRF_Master_ID;var a=this.getOwnerComponent().getModel().sServiceUrl;var s={LogisticsMPL_AssignEmail_Id:t,LogisticsMPL_Allocation_Date:(new Date).toLocaleDateString("en-CA")};var r="/per_Adani_Logistics_LRF_Master";var n=a+r+"(guid'"+i+"')";var o=this;jQuery.ajax({url:n,method:"PATCH",headers:{"Content-Type":"application/json",DataServiceVersion:"2.0","X-CSRF-Token":"Fetch"},data:JSON.stringify(s),success:function(){console.log("PATCH request successful");o.getView().byId("idTokensTable").rebindTable()},error:function(e){console.error("PATCH request failed: "+e.responseText);alert(e.responseText)}})},_handleValueHelpConfirmFF:function(e){var t=e.getParameter("selectedItem").getTitle();var i=this.getView().byId("mtable").getSelectedItem().getBindingContext().getObject().LRF_Master_ID;var a=this.getOwnerComponent().getModel().sServiceUrl;var s={FF_AssignEmail_Id:t,FF_Allocation_Date:(new Date).toLocaleDateString("en-CA")};var r="/per_Adani_Logistics_LRF_Master";var n=a+r+"(guid'"+i+"')";var o=this;jQuery.ajax({url:n,method:"PATCH",headers:{"Content-Type":"application/json",DataServiceVersion:"2.0","X-CSRF-Token":"Fetch"},data:JSON.stringify(s),success:function(){console.log("PATCH request successful");o.getView().byId("idTokensTable").rebindTable()},error:function(e){console.error("PATCH request failed: "+e.responseText);alert(e.responseText)}})},_handleValueHelpConfirmCHA:function(e){var t=e.getParameter("selectedItem").getTitle();var i=this.getView().byId("mtable").getSelectedItem().getBindingContext().getObject().LRF_Master_ID;var a=this.getOwnerComponent().getModel().sServiceUrl;var s={CHA_AssignEmail_Id:t,CHA_Allocation_Date:(new Date).toLocaleDateString("en-CA")};var r="/per_Adani_Logistics_LRF_Master";var n=a+r+"(guid'"+i+"')";var o=this;jQuery.ajax({url:n,method:"PATCH",headers:{"Content-Type":"application/json",DataServiceVersion:"2.0","X-CSRF-Token":"Fetch"},data:JSON.stringify(s),success:function(){console.log("PATCH request successful");o.getView().byId("idTokensTable").rebindTable()},error:function(e){console.error("PATCH request failed: "+e.responseText);alert(e.responseText)}})},_handleValueHelpClose:function(e){var t=[];var i=e.getSource()._sSearchFieldValue;if(i&&i.length>0){var a=new sap.ui.model.Filter;t.push(a)}var s=e.getSource().getBinding("items");s.filter(t)},onSelectRadio:function(e){var t=this.getView().byId("mtable").getSelectedItem().getBindingContext().getObject();this.getView().byId("iBtnMPL").setEnabled(true);if(t.LogisticsMPL_Status==="Accept")this.getView().byId("iBtnFF").setEnabled(true);else this.getView().byId("iBtnFF").setEnabled(false);if(t.FF_Status==="Accept")this.getView().byId("iBtnCHA").setEnabled(true);else this.getView().byId("iBtnCHA").setEnabled(false)}})});